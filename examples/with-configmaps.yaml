apiVersion: ephemeral.argo.io/v1alpha1
kind: EphemeralApplication
metadata:
  name: example-with-configmaps
  namespace: default
spec:
  repoURL: https://github.com/argoproj/argocd-example-apps.git
  path: guestbook
  targetRevision: HEAD
  
  expirationDate: "2025-11-21T17:10:00Z"
  
  # Inject ConfigMaps with environment-specific configuration
  configMaps:
  # Copy from shared namespace
  # - name: shared-config
  #   sourceNamespace: shared-configs
  
  # Create inline with service endpoints
  - name: app-config
    data:
      DATABASE_HOST: "postgres.databases.svc.cluster.local"
      DATABASE_PORT: "5432"
      REDIS_HOST: "redis.cache.svc.cluster.local"
      REDIS_PORT: "6379"
      API_ENDPOINT: "https://api.example.com"
      LOG_LEVEL: "debug"
      ENVIRONMENT: "ephemeral-test"
  
  syncPolicy:
    automated:
      prune: true
      selfHeal: true

